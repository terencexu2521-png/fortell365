name: SEO Generator

on:
  schedule:
    - cron: '0 2 * * *'
  workflow_dispatch:

jobs:
  generate:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - uses: actions/setup-python@v4
      with:
        python-version: '3.9'
    - run: |
        echo "Starting SEO generation"
        
        # Create directories
        mkdir -p public/seo
        mkdir -p seo_pages
        
        # Generate simple articles
        echo "<h1>25岁还没谈过恋爱，八字是不是有啥问题？</h1>" > seo_pages/article1.html
        echo "<h1>30年属兔女和什么属相的男生最适合？</h1>" >> seo_pages/article1.html
        echo "<h1>2025年桃花运怎么样？什么时候能脱单？</h1>" >> seo_pages/article1.html
        
        # Copy to public
        cp seo_pages/article1.html public/seo/
        
        # Generate more articles
        for i in {2..30}; do
          echo "<h1>SEO Article $i</h1><p>Fortell365专业命理分析</p>" > seo_pages/article$i.html
          cp seo_pages/article$i.html public/seo/
        done
        
        echo "Generated 30 articles"
        ls seo_pages/
        
    - run: |
        git config --global user.name "Bot"
        git config --global user.email "bot@example.com"
        git add public/seo/ seo_pages/
        git commit -m "SEO articles generated" || echo "No changes"
        git push origin main || echo "Push failed"
        
        echo "✅ Complete! Generated $(ls seo_pages/*.html | wc -l) articles"
