name: SEO Generator

# æ·»åŠ æƒé™é…ç½®ï¼Œç¡®ä¿æœ‰å†™å…¥æƒé™
permissions:
contents: write

on:
schedule:
- cron: '0 2 * * *'
workflow_dispatch:

jobs:
generate:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v4
- uses: actions/setup-python@v4
with:
python-version: '3.9'
- name: Setup directories
run: |
echo "ğŸ“ è®¾ç½®ç›®å½•ç»“æ„"
mkdir -p public/seo
mkdir -p seo_pages
echo "âœ… ç›®å½•åˆ›å»ºå®Œæˆ"
- name: Generate SEO content
run: |
echo "ğŸš€ å¼€å§‹ç”ŸæˆSEOæ–‡ç« ..."

# åˆ›å»ºç´¢å¼•æ–‡ä»¶
cat > seo_pages/index.json << 'EOF'
{
"generated_at": "2026-01-24",
"total_articles": 30,
"articles": []
}
EOF

# ç”Ÿæˆ30ç¯‡SEOæ–‡ç« 
questions=(
"25å²è¿˜æ²¡è°ˆè¿‡æ‹çˆ±ï¼Œå…«å­—æ˜¯ä¸æ˜¯æœ‰å•¥é—®é¢˜ï¼Ÿ"
"30å¹´å±å…”å¥³å’Œä»€ä¹ˆå±ç›¸çš„ç”·ç”Ÿæœ€é€‚åˆï¼Ÿ"
"2025å¹´æ¡ƒèŠ±è¿æ€ä¹ˆæ ·ï¼Ÿä»€ä¹ˆæ—¶å€™èƒ½è„±å•ï¼Ÿ"
"å±é¼ å’Œå±å…”çš„å…«å­—é…å¯¹åˆ†æ"
"å…«å­—æ˜¾ç¤ºçš„æœ€ä½³è„±å•æ—¶æœº"
"30å²æœ¬å‘½å¹´æ„Ÿæƒ…è¿åŠ¿å¦‚ä½•ï¼Ÿ"
"å±è›‡å¥³ç”Ÿæ„Ÿæƒ…è¿åŠ¿é¢„æµ‹"
"å…«å­—ä¸­æ­£ç¼˜å‡ºç°çš„ç‰¹å¾"
"25å²å¥³ç”Ÿæ„Ÿæƒ…å‘å±•æ–¹å‘"
"å±é¾™å’Œå±çŒ´çš„é…å¯¹åˆ†æ"
"å…«å­—å©šå§»å®«è¯¦è§£"
"æ¡ƒèŠ±è¿æ—ºç››çš„å…«å­—ç‰¹å¾"
"æ„Ÿæƒ…ä¸é¡ºçš„å…«å­—åŒ–è§£æ–¹æ³•"
"30å²å•èº«å¥³ç”Ÿçš„è„±å•æŒ‡å—"
"å±è™å¥³ç”Ÿæœ€ä½³é…å¶å±ç›¸"
"å…«å­—ä¸­å©šå§»è¿åŠ¿çš„åˆ¤æ–­"
"28å²å¥³ç”Ÿæ„Ÿæƒ…è¿åŠ¿åˆ†æ"
"å±é¸¡å’Œå±ç¾Šçš„å…«å­—é…å¯¹"
"å…«å­—ä¸­é…å¶ä¿¡æ¯çš„è·å–"
"25å²ç”·ç”Ÿæ¡ƒèŠ±è¿åŠ¿"
"32å²å¥³æ€§æ„Ÿæƒ…å‘å±•è¶‹åŠ¿"
"å±çŒªå’Œå±ç‰›çš„é…å¯¹åˆ†æ"
"å…«å­—ä¸­çƒ‚æ¡ƒèŠ±çš„è¯†åˆ«"
"æ„Ÿæƒ…ç¨³å®šæœŸçš„å…«å­—ç‰¹å¾"
"30å²ç”·å£«æ„Ÿæƒ…è¿åŠ¿"
"å±è›‡å’Œå±è™çš„é…å¯¹"
"å…«å­—ä¸­å¤«å¦»æ„Ÿæƒ…çš„é¢„æµ‹"
"35å²å¥³æ€§è„±å•æœºä¼š"
"å±çŒ´å’Œå±é¼ çš„å…«å­—é…å¯¹"
"å…«å­—æ˜¾ç¤ºçš„å©šå§»æ—¶æœº"
)

# ç”ŸæˆHTMLæ–‡ç« 
for i in {1..30}; do
question="${questions[$i-1]}"
filename="seo-article-$i.html"

cat > "seo_pages/$filename" << EOF
<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>$question | Fortell365ä¸“ä¸šå‘½ç†</title>
<meta name="description" content="$questionä¸“ä¸šå…«å­—ç´«å¾®æ–—æ•°åˆ†æ">
<meta name="keywords" content="å…«å­—,å‘½ç†,Fortell365,æ„Ÿæƒ…è¿åŠ¿">
</head>
<body style="font-family: 'Microsoft YaHei', Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; line-height: 1.6;">
<header style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 30px; text-align: center; border-radius: 12px; margin-bottom: 30px;">
<h1 style="margin: 0; font-size: 28px;">Fortell365 ä¸“ä¸šå‘½ç†</h1>
<p style="margin: 10px 0 0 0; opacity: 0.9;">æ·±åº¦å…«å­—ç´«å¾®æ–—æ•°åˆ†æ</p>
</header>

<article style="background: white; padding: 40px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1);">
<h2 style="color: #2c3e50; border-bottom: 3px solid #3498db; padding-bottom: 10px; font-size: 24px;">$question</h2>

<div style="background: #f8f9fa; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #3498db;">
<h3 style="color: #34495e; margin-top: 0;">å‘½ç†åˆ†æè¦ç‚¹</h3>
<p>ä»å…«å­—çš„è§’åº¦æ¥çœ‹ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å€¼å¾—å…³æ³¨çš„é—®é¢˜ã€‚æ¯ä¸ªäººçš„æ„Ÿæƒ…è¿åŠ¿éƒ½æœ‰å…¶ç‹¬ç‰¹çš„è§„å¾‹å’ŒèŠ‚å¥ï¼Œéœ€è¦ç»“åˆä¸ªäººå…«å­—è¿›è¡Œå…·ä½“åˆ†æã€‚</p>
</div>

<div style="background: #fff3cd; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #ffc107;">
<h3 style="color: #856404; margin-top: 0;">ä¸“ä¸šå»ºè®®</h3>
<p>åŸºäºæ‚¨çš„å…«å­—ç‰¹å¾åˆ†æï¼Œæˆ‘ä»¬å»ºè®®æ‚¨ä¿æŒç§¯æçš„å¿ƒæ€ï¼Œç›¸ä¿¡ç¼˜åˆ†è‡ªç„¶ä¼šåˆ°æ¥ã€‚åŒæ—¶ï¼Œå¯ä»¥é€šè¿‡æ”¹å–„ä¸ªäººå½¢è±¡ã€æå‡å†…åœ¨ä¿®å…»æ¥å¢åŠ å¸å¼•åŠ›ã€‚</p>
</div>

<div style="background: #d1ecf1; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #17a2b8;">
<h3 style="color: #0c5460; margin-top: 0;">æ„Ÿæƒ…è¿åŠ¿æç¤º</h3>
<p>æ ¹æ®æ‚¨çš„å…«å­—é…ç½®ï¼Œè¿‘æœŸæ„Ÿæƒ…æ–¹é¢å¯èƒ½ä¼šæœ‰ç§¯æçš„å‘å±•ã€‚ä¿æŒå¼€æ”¾çš„å¿ƒæ€ï¼Œå¤šå‚åŠ ç¤¾äº¤æ´»åŠ¨ï¼Œå¢åŠ é‡åˆ°åˆé€‚å¯¹è±¡çš„æœºä¼šã€‚</p>
</div>

<div style="background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%); padding: 25px; border-radius: 10px; margin: 30px 0; text-align: center;">
<h3 style="color: #8b4513; margin-bottom: 15px;">æƒ³äº†è§£æ›´å¤šå‘½ç†å¥¥ç§˜ï¼Ÿ</h3>
<p style="color: #654321; margin-bottom: 20px;">Fortell365æä¾›æœ€ä¸“ä¸šçš„å…«å­—ç´«å¾®æ–—æ•°åˆ†æ</p>
<a href="/generate/bazi" style="background: #e67e22; color: white; padding: 12px 30px; text-decoration: none; border-radius: 25px; font-weight: bold; display: inline-block; transition: all 0.3s ease;">ç«‹å³ç”Ÿæˆä¸“å±å…«å­—æŠ¥å‘Š</a>
</div>

<footer style="margin-top: 40px; padding-top: 20px; border-top: 1px solid #ecf0f1; text-align: center; color: #7f8c8d;">
<p>Â© 2026 Fortell365 çµæ„Ÿå‘½ç† Â· ä»…ä¾›å¨±ä¹å‚è€ƒ</p>
</footer>
</article>
</body>
</html>
EOF

# å¤åˆ¶åˆ°publicç›®å½•
cp "seo_pages/$filename" "public/seo/"

# æ›´æ–°ç´¢å¼•æ–‡ä»¶
jq ".articles += [\"$filename\"]" seo_pages/index.json > seo_pages/index.json.tmp
mv seo_pages/index.json.tmp seo_pages/index.json

echo "âœ… ç”Ÿæˆ: $filename"
done

# ç”Ÿæˆå®Œæˆç»Ÿè®¡
total_files=$(ls seo_pages/*.html | wc -l)
echo "ğŸ“Š SEOæ–‡ç« ç”Ÿæˆå®Œæˆ: $total_files ç¯‡"

# éªŒè¯ç”Ÿæˆç»“æœ
if [ $total_files -lt 30 ]; then
echo "âŒ ç”Ÿæˆå¤±è´¥ï¼šåªæœ‰ $total_files ç¯‡æ–‡ç« ï¼ŒæœŸæœ›30ç¯‡"
exit 1
fi

echo "ğŸ‰ æ‰€æœ‰SEOæ–‡ç« ç”ŸæˆæˆåŠŸï¼"

- name: Git operations
run: |
echo "ğŸ”„ å¼€å§‹Gitæ“ä½œ..."

# é…ç½®Gitç”¨æˆ·ä¿¡æ¯
git config --global user.name "Fortell365 SEO Bot"
git config --global user.email "bot@fortell365.com"

# æ·»åŠ å˜æ›´
echo "ğŸ“‹ æ·»åŠ æ–‡ä»¶åˆ°Git..."
git add public/seo/
git add seo_pages/

# æ£€æŸ¥æ˜¯å¦æœ‰å˜æ›´
if git diff --cached --quiet; then
echo "â„¹ï¸ æ²¡æœ‰å˜æ›´éœ€è¦æäº¤"
exit 0
fi

echo "âœ… æ‰¾åˆ°å˜æ›´ï¼Œå¼€å§‹æäº¤..."

# ç”Ÿæˆæäº¤ä¿¡æ¯
current_time=$(date '+%Y-%m-%d %H:%M:%S')
article_count=$(ls seo_pages/*.html | wc -l)

git commit -m "ğŸ¤– Auto-generated SEO content - $article_count articles

Generated on: $current_time
Trigger: ${{ github.event_name }}
Articles count: $article_count

Files added:
$(git diff --cached --name-only)"

echo "ğŸ“¤ æ¨é€åˆ°GitHub..."
git push origin ${{ github.ref_name }}

echo "ğŸ‰ æˆåŠŸï¼æ¨é€å®Œæˆ"

- name: Deployment summary
run: |
echo "ğŸ“Š éƒ¨ç½²æ‘˜è¦"
echo "ä»“åº“: ${{ github.repository }}"
echo "åˆ†æ”¯: ${{ github.ref_name }}"
echo "æäº¤: ${{ github.sha }}"
echo "æ–‡ç« æ•°é‡: $(ls seo_pages/*.html | wc -l)"
echo "GitHub URL: https://github.com/${{ github.repository }}/tree/${{ github.ref_name }}/public/seo"

echo "âœ… SEOå†…å®¹ç”Ÿæˆå’Œéƒ¨ç½²å®Œæˆï¼"
